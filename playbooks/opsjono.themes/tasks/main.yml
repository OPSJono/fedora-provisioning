---
- name: Add the Papirus Icon repo
  template:
    src: papirus-icon-theme.repo.j2
    dest: /etc/yum.repos.d/papirus-icon-theme.repo

# TODO: Gnome extensions to move clock the right, move notification, de-annoy the "app is ready" notifications, top bar transparency (27%), hide dash in overview?
- name: Install Arc themes, papirus & mac icons
  dnf:
    name: ['arc-theme', 'papirus-icon-theme', 'la-capitaine-icon-theme']
    state: latest

- name: Ensure the theme folders exist
  file:
    path: "{{ item }}"
    state: directory
    owner: root
    group: root
    mode: 0775
  become: true
  become_user: root
  with_items:
    - "/usr/share/themes"
    - "/usr/share/themes/WhiteSur-dark"
    - "/usr/share/themes/WhiteSur-dark-solid"

- name: Install Gnome Mac themes (takes a few minutes)
  copy:
    src: "opsjono.themes/files/shell-themes/"
    dest: "/usr/share/themes/"
  become: true
  become_user: root

- name: Set variables for fedora wallpapers
  set_fact:
    files_from: "opsjono.themes/files/pictures/wallpapers/fedora"
    files_to: "/home/{{ ansible_user }}/Pictures/wallpapers/fedora"

- include_tasks: copy-files.yml

- name: Set variables for mac wallpapers
  set_fact:
    files_from: "opsjono.themes/files/pictures/wallpapers/mac"
    files_to: "/home/{{ ansible_user }}/Pictures/wallpapers/mac"

- include_tasks: copy-files.yml

- name: Set variables for mac icons
  set_fact:
    files_from: "opsjono.themes/files/pictures/icons"
    files_to: "/home/{{ ansible_user }}/Pictures/icons"

- include_tasks: copy-files.yml

- name: Install the mac cursor theme
  copy:
    src: "opsjono.themes/files/cursors/McMojave-cursors/"
    dest: "/home/{{ ansible_user }}/.icons/McMojave-cursors/"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: 0775
    directory_mode: true

- name: Install the mac font LucidaGrande
  copy:
    src: "opsjono.themes/files/fonts/"
    desc: "/home/{{ ansible_user }}/.local/share/fonts/"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: 0775
    directory_mode: true